---
title: "Cheatsheet"
output: html_notebook
---

## Случайни експерименти

**Избор на случайни елементи от вектор с връщане:**
```{r}
    sample(x=1:5, size=3, replace=T)
```

**Избор на случайни елементи от вектор без връщане:**
```{r}
    sample(x=1:5, size=3, replace=F)
```

**Генериране на пермутация:**
```{r}
    x <- 1:5
    sample(x, length(x), replace=F)
```
**Намиране на честота на събитие (приблизителна вероятност):**

В отдел на фирма работят 20 човека. За Коледа те решават да си разменят
подаръци. В кутия слагат 20 листчета, на всяко от които има едно име. Всеки тегли листче
(без да го връща) и подарява на този, чието име е изтеглил. Каква е вероятността поне
един да изтегли своето име?

```{r}
sim <- function(num_people) {
    x <- sample( 1:num_people, num_people, replace=F ) # permute
    d <- x - 1:num_people # diff between personal and received number
    any(d==0) # check if for any there is no diff between the two numbers
}

prob <- function(times, num_people) {
    result <- replicate(times, sim(num_people))
    sum(result)/length(result)
}

prob(100000, 20)
```
**Условна вероятност:**

Имаме 3 карти: първата е бяла от двете страни, втората е черна от двете
страни, а третата е бяла от едната и черна от другата страна. Всяка карта е поставена в
затворена кутия. Избираме произволна кутия, отваряме я и виждаме, че горната страна
на картата в нея е бяла. Каква е вероятността другата страна на картата също да е бяла?

```{r}
sim <- function() {
    cards <- sample(c("bb", "ww", "bw"), 1)
    side <- sample(1:2, 1 )
    up <- substr(cards, start=side, stop=side)
    c(up, cards)
}

prob <- function(times) {
    result <- replicate(times, sim())
    sum(result[2,]=="ww") / sum(result[1,]=="w")
}

prob(100000)
```
## Случайни величини

### Дискретни случайни величини

**Бернулиево разпределение**

X - *брой успехи*

```{r}
successes <- 10
tries <- 20
success_probability <- 0.5
number_observations <- 10

# P(X = successes)
dbinom(successes, tries, success_probability)

# P(X <= successes)
pbinom(successes, tries, success_probability)

# generate number_observations numbers from the Binomial distribution
rbinom(number_observations, tries, success_probability)
```

**Геометрично разпределение**

X - *брой опити до успех*

```{r}
tries <- 2
success_probability <- 0.5
number_observations <- 10

# P(X = tries)
dgeom(tries - 1, success_probability)

# P(X <= tries)
pgeom(tries - 1, success_probability)

# generate number_observations numbers from the Geometric distribution
rgeom(number_observations, success_probability) + 1
```

X - *брой неуспехи преди първи успех*

```{r}
tries <- 2
success_probability <- 0.5
number_observations <- 10

# P(X = tries)
dgeom(tries, success_probability)

# P(X <= tries)
pgeom(tries, success_probability)

# generate number_observations numbers from the Geometric distribution
rgeom(number_observations, success_probability)
```

**Отрицателно биномно разпределение**

X - *брой опити преди r-ти успех включително*

```{r}
successes <- 10
tries <- 20
success_probability <- 0.5
number_observations <- 10

# P(X = tries)
dnbinom(tries - successes, successes, success_probability)

# P(X <= tries)
pnbinom(tries - successes, successes, success_probability)

# generate number_observations numbers from the Negative Binomial distribution
rnbinom(number_observations, successes, success_probability) + successes
```

X - *брой неуспехи преди r-ти успех*

```{r}
successes <- 10
failures <- 10
success_probability <- 0.5
number_observations <- 10

# P(X = failures)
dnbinom(failures, successes, success_probability)

# P(X <= tries)
pnbinom(failures, successes, success_probability)

# generate number_observations numbers from the Negative Binomial distribution
rnbinom(number_observations, successes, success_probability)
```

**Хипергеометрично резпределение**

N - *общ брой топки*

M - *брой бели топки*

X - *брой извадени бели топки (при извадени L без връщане)*

```{r}
chosen_white <- 5
white <- 10
all <- 20
tries <- 10
number_observations <- 10

# P(X = chosen_white)
dhyper(chosen_white, white, all - white, tries)

# P(X <= chosen_white)
phyper(chosen_white, white, all - white, tries)

# generate number_observations numbers from the Hypergeometric distribution
rhyper(number_observations, white, all - white, tries)
```

**Поасоново разпределение**

X - **брой случвания на събитието**

```{r}
occurences <- 1
rate <- 0.6
number_observations <- 10

# P(X = occurences)
dpois(occurences, rate)

# P(X <= occurences)
ppois(occurences, rate)

# generate number_observations numbers from the Poisson distribution
rpois(number_observations, rate)
```

### Непрекъснати случайни величини

**Равномерно разпределение**


```{r}
min <- 0
max <- 10
x <- 4
p <- 0.5
number_observations <- 5

# f(x)
dunif(x, min, max)

# P(X <= x)
punif(x, min, max)

# Q(x)
qunif(p, min, max)

# generate number_observations numbers from the Uniform distribution
runif(number_observations, min, max)
```
**Експоненциално разпределение**


В теорията на вероятностите и статистиката, експоненциалното разпределение разпределение на времето между събитията в процес на точка на Поасон, т.е. процес, при който **събитията се случват непрекъснато и независимо** с постоянна средна скорост.

```{r}
rate <- 0.5
x <- 4
p <- 0.5
number_observations <- 5

# f(x)
dexp(x, rate)

# P(X <= x)
pexp(x, rate)

# Q(x)
qexp(p, rate)

# generate number_observations numbers from the Exponential distribution
rexp(number_observations, rate)
```

**Нормално разпределение**

```{r}
mean <- 5
standard_deviation <- 2
x <- 6
p <- 0.5
number_observations <- 5

# f(x)
dnorm(x, mean, standard_deviation)

# P(X <= x)
pnorm(x, mean, standard_deviation)

# Q(x)
qnorm(p, mean, standard_deviation)

# generate number_observations numbers from the Normal distribution
rnorm(number_observations, mean, standard_deviation)
```

## Данни. Таблици и графики

### Данни от тест
```{r}
exam <- read.table("../datasets/examAB.txt", header=T)
exam

variant <- exam$variant

class(variant)

table(variant)
table(variant) / length(variant)
sort(table(variant) / length(variant), decreasing=T)

barplot(table(variant))
barplot(table(variant) / length(variant))
barplot(sort(table(variant) / length(variant), decreasing=T))
pie(table(variant))

```

### Други числови данни
```{r}
wait <- c(2,3,3,5,5,2,7,10,4,3,1,7,11,10,5,6,3,8,5,12,5,3,8,5,7)

table(wait)

wait_grouped <- cut(wait, breaks=seq(0,12,2))
table(wait_grouped)
table(wait_grouped)/length(wait)

barplot(table(wait_grouped))

hist(wait)
hist(wait, probability=T)
hist(wait, breaks=seq(0, 12, 3))

# хистограма с честотен полигон
h <- hist(wait, probability=T)
lines(
    x=c(
        min(h$breaks),
        h$mids,
        max(h$breaks)
    ),
    y=c(
      0,
      h$density,
      0
    ),
    type="l",
    lwd=2,
    col="darkorange1"
)

stripchart(
    wait,
    method="stack",
    pch=20,
    cex=1.5
)

# диаграма клон с листа (stem-and-leaf plot)
# интервали: [0, 4], (4, 9], (9, 12]
stem(wait)

# увеличаване на броя подинтервали
# интервали: [0, 1] (1, 3] (3, 5], (5, 7], (7, 9], (9, 11] (11, 13]
stem(wait, scale=2)


```
